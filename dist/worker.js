!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r;function i(e,t){return{kind:e,argument:t}}function a(e,t){var n=[];if(e.length-t==2){var a=e[t+1];a.kind===r.INC_DATA||a.kind===r.DEC_DATA?n.push(i(r.LOOP_SET_TO_ZERO,0)):a.kind!==r.INC_PTR&&a.kind!==r.DEC_PTR||n.push(i(r.LOOP_MOVE_PTR,a.kind===r.INC_PTR?a.argument:-a.argument))}else e.length-t==5&&e[t+1].kind===r.DEC_DATA&&e[t+3].kind===r.INC_DATA&&1===e[t+1].argument&&1===e[t+3].argument&&(e[t+2].kind===r.INC_PTR&&e[t+4].kind===r.DEC_PTR&&e[t+2].argument===e[t+4].argument?n.push(i(r.LOOP_MOVE_DATA,e[t+2].argument)):e[t+2].kind===r.DEC_PTR&&e[t+4].kind===r.INC_PTR&&e[t+2].argument===e[t+4].argument&&n.push(i(r.LOOP_MOVE_DATA,-e[t+2].argument)));return n}function o(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.r(t),function(e){e.INVALID_OP="INVALID_OP",e.INC_PTR="INC_PTR",e.DEC_PTR="DEC_PTR",e.INC_DATA="INC_DATA",e.DEC_DATA="DEC_DATA",e.READ_STDIN="READ_STDIN",e.WRITE_STDOUT="WRITE_STDOUT",e.LOOP_SET_TO_ZERO="LOOP_SET_TO_ZERO",e.LOOP_MOVE_PTR="LOOP_MOVE_PTR",e.LOOP_MOVE_DATA="LOOP_MOVE_DATA",e.JUMP_IF_DATA_ZERO="JUMP_IF_DATA_ZERO",e.JUMP_IF_DATA_NOT_ZERO="JUMP_IF_DATA_NOT_ZERO"}(r||(r={}));var s=new TextEncoder,c={getNewLine:function(){return[10]},getSpace:function(){return[32]},getOpenBracket:function(){return[40]},getCloseBracket:function(){return[41]},getComma:function(){return[44]},getEndLine:function(){return[59]},getAssigne:function(){return[61]},getCurclyOpenBracket:function(){return[123]},getCurclyCloseBracket:function(){return[125]}},f={VarDeclaration:{getLet:function(){return[108,101,116]},getConst:function(){return[99,111,110,115,116]}},getNew:function(){return[110,101,119]},getFor:function(){return[102,111,114]}},l={getFunctionCall:function(e,t){var n=t.filter((function(e){return e})).map((function(e){return Array.from(s.encode(String(e)))}));return e.concat.apply(e,[c.getOpenBracket()].concat(o(n),[c.getCloseBracket()]))},getConstructorCall:function(e,t){return f.getNew().concat(c.getSpace(),l.getFunctionCall(e,t))}},m={Names:{GlobalName:{getUint8Array:function(){return[85,105,110,116,56,65,114,114,97,121]}},ReservedNames:f,getObjectPropertyOpenBracket:function(){return[91]},getObjectPropertyCloseBracket:function(){return[93]},getName:function(e){return Array.from(s.encode(e))}},Punctuation:c,Numbers:{add:function(){return[43]},subtract:function(){return[45]},getInt:function(e){return Array.from(s.encode(String(e)))}},FunctionBin:l,Conditions:{getIf:function(){return[105,102]},getLess:function(){return[60]},getStrictEqual:function(){return[61,61,61]}}};function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}var p=new TextDecoder,y=function(){function e(t){h(this,e),this.textGenerator=t}return d(e,[{key:"for",value:function(){return this.textGenerator.pushText(m.Names.ReservedNames.getFor().concat(m.Punctuation.getSpace(),m.Punctuation.getOpenBracket())),new _(this.textGenerator)}},{key:"endFor",value:function(){return this.textGenerator.pushText(m.Punctuation.getCurclyCloseBracket()),this.textGenerator}}]),e}(),_=function(){function e(t){h(this,e),this.textGenerator=t}return d(e,[{key:"let",value:function(){return this.textGenerator.let(),this}},{key:"const",value:function(){return this.textGenerator.const(),this}},{key:"name",value:function(e){return this.textGenerator.name(e),this}},{key:"assigne",value:function(){return this.textGenerator.assigne(),this}},{key:"number",value:function(e){return this.textGenerator.number(e),this}},{key:"comma",value:function(){return this.textGenerator.comma(),this}},{key:"endForDeclaration",value:function(){return this.textGenerator.binString.push(m.Punctuation.getEndLine()),new b(this.textGenerator)}}]),e}(),b=function(){function e(t){h(this,e),this.textGenerator=t}return d(e,[{key:"name",value:function(e){return this.textGenerator.name(e),this}},{key:"number",value:function(e){return this.textGenerator.number(e),this}},{key:"less",value:function(){return this.textGenerator.less(),this}},{key:"strictEqual",value:function(){return this.textGenerator.strictEqual(),this}},{key:"comma",value:function(){return this.textGenerator.newLine(),this}},{key:"objectProperty",value:function(e){return this.textGenerator.objectProperty(e),this}},{key:"endForCondition",value:function(){return this.textGenerator.binString.push(m.Punctuation.getEndLine()),new T(this.textGenerator)}}]),e}(),T=function(){function e(t){h(this,e),this.textGenerator=t}return d(e,[{key:"assigne",value:function(){return this.textGenerator.assigne(),this}},{key:"name",value:function(e){return this.textGenerator.name(e),this}},{key:"number",value:function(e){return this.textGenerator.number(e),this}},{key:"add",value:function(){return this.textGenerator.add(),this}},{key:"endForUpdate",value:function(){return this.textGenerator.binString.push(m.Punctuation.getCloseBracket().concat(m.Punctuation.getSpace(),m.Punctuation.getCurclyOpenBracket())),this.textGenerator}}]),e}(),k=function(){function e(t){h(this,e),this.textGenerator=t}return d(e,[{key:"if",value:function(){return this.textGenerator.binString.push(m.Conditions.getIf().concat(m.Punctuation.getSpace(),m.Punctuation.getOpenBracket())),new O(this.textGenerator)}},{key:"endIf",value:function(){return this.textGenerator.pushText(m.Punctuation.getCurclyCloseBracket()),this.textGenerator}}]),e}(),O=function(){function e(t){h(this,e),this.textGenerator=t}return d(e,[{key:"name",value:function(e){return this.textGenerator.name(e),this}},{key:"number",value:function(e){return this.textGenerator.number(e),this}},{key:"less",value:function(){return this.textGenerator.less(),this}},{key:"strictEqual",value:function(){return this.textGenerator.strictEqual(),this}},{key:"comma",value:function(){return this.textGenerator.newLine(),this}},{key:"objectProperty",value:function(e){return this.textGenerator.objectProperty(e),this}},{key:"endIfCondition",value:function(){return this.textGenerator.binString.push(m.Punctuation.getCloseBracket().concat(m.Punctuation.getSpace(),m.Punctuation.getCurclyOpenBracket())),this.textGenerator}}]),e}(),P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];h(this,e),this.binString=t,this.isStartLine=!0,this.forGenerator=new y(this),this.ifGenerator=new k(this)}return d(e,[{key:"let",value:function(){return this.pushText(m.Names.ReservedNames.VarDeclaration.getLet()),this}},{key:"const",value:function(){return this.pushText(m.Names.ReservedNames.VarDeclaration.getConst()),this}},{key:"number",value:function(e){return this.pushText(m.Numbers.getInt(e)),this}},{key:"add",value:function(){return this.pushText(m.Numbers.add()),this}},{key:"subtract",value:function(){return this.pushText(m.Numbers.subtract()),this}},{key:"name",value:function(e){return this.pushText(m.Names.getName(e)),this}},{key:"objectProperty",value:function(e){return this.binString.push(m.Names.getObjectPropertyOpenBracket().concat("string"==typeof e?m.Names.getName(e):m.Numbers.getInt(e),m.Names.getObjectPropertyCloseBracket())),this}},{key:"assigne",value:function(){return this.pushText(m.Punctuation.getAssigne()),this}},{key:"comma",value:function(){return this.binString.push(m.Punctuation.getComma()),this}},{key:"less",value:function(){return this.pushText(m.Conditions.getLess()),this}},{key:"strictEqual",value:function(){return this.pushText(m.Conditions.getStrictEqual()),this}},{key:"for",value:function(){return this.forGenerator.for()}},{key:"if",value:function(){return this.ifGenerator.if()}},{key:"endIf",value:function(){return this.ifGenerator.endIf()}},{key:"endFor",value:function(){return this.forGenerator.endFor()}},{key:"call",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.pushText(m.FunctionBin.getFunctionCall(m.Names.getName(e),t)),this}},{key:"newUint8Array",value:function(e){return this.pushText(m.FunctionBin.getConstructorCall(m.Names.GlobalName.getUint8Array(),[e])),this}},{key:"endLine",value:function(){return this.binString.push(m.Punctuation.getEndLine()),this}},{key:"newLine",value:function(){return this.binString.push(m.Punctuation.getNewLine()),this.isStartLine=!0,this}},{key:"toString",value:function(){return p.decode(Uint8Array.from(this.binString.flat()))}},{key:"pushText",value:function(e){return this.isStartLine?(this.binString.push(e),this.isStartLine=!1):this.binString.push(m.Punctuation.getSpace().concat(e)),this}}]),e}();function v(e){switch(e){case r.INC_PTR:return">";case r.DEC_PTR:return"<";case r.INC_DATA:return"+";case r.DEC_DATA:return"-";case r.READ_STDIN:return",";case r.WRITE_STDOUT:return".";case r.JUMP_IF_DATA_ZERO:return"[";case r.JUMP_IF_DATA_NOT_ZERO:return"]";case r.LOOP_SET_TO_ZERO:return"s";case r.LOOP_MOVE_PTR:return"m";case r.LOOP_MOVE_DATA:return"d";case r.INVALID_OP:return"x"}return"unknown"}self.inF=function(){return prompt("enter value")},self.outF=function(e){self.postMessage({type:"out",value:String.fromCharCode(e)})},self.addEventListener("message",(function(e){var t=e.data,n=t.type,o=t.src;if("start"===n){var u=function(e){for(var t=0,n=e.length,o=[],u=[];t<n;){var s=e[t];if("["==s)u.push(o.length),o.push(i(r.JUMP_IF_DATA_ZERO,0)),t++;else if("]"==s){u.length||console.warn("unmatched closing ']' at pc=".concat(t));var c=u.pop(),f=a(o,c);f.length?o=o.slice(0,c).concat(f):(o[c].argument=o.length,o.push(i(r.JUMP_IF_DATA_NOT_ZERO,c))),t++}else{for(var l=t++;t<n&&e[t]===s;)t++;var m=t-l,h=r.INVALID_OP;switch(s){case">":h=r.INC_PTR;break;case"<":h=r.DEC_PTR;break;case"+":h=r.INC_DATA;break;case"-":h=r.DEC_DATA;break;case",":h=r.READ_STDIN;break;case".":h=r.WRITE_STDOUT;break;default:console.warn("\"bad char '".concat(s,"' at pc=").concat(l))}o.push(i(h,m))}}return o}(function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];">"!=r&&"<"!=r&&"+"!=r&&"-"!=r&&"."!=r&&","!=r&&"["!=r&&"]"!=r||t.push(r)}return t}(o)),s=performance.now();console.log("start at ".concat(s)),function(e,t,n){var i=new P;i.const().name("memory").assigne().newUint8Array(3e4).endLine(),i.newLine().let().name("p").assigne().number(0).endLine();for(var a=0;a<e.length;){var o=e[a];switch(o.kind){case r.INC_PTR:i.newLine().name("p").assigne().name("p").add().number(o.argument).endLine();break;case r.DEC_PTR:i.newLine().name("p").assigne().name("p").subtract().number(o.argument).endLine();break;case r.INC_DATA:i.newLine().name("memory").objectProperty("p").assigne().name("memory").objectProperty("p").add().number(o.argument).endLine();break;case r.DEC_DATA:i.newLine().name("memory").objectProperty("p").assigne().name("memory").objectProperty("p").subtract().number(o.argument).endLine();break;case r.READ_STDIN:i.newLine().for().let().name("i").assigne().number(0).endForDeclaration().name("i").less().number(o.argument).endForCondition().name("i").assigne().name("i").add().number(1).endForUpdate().newLine().name("memory").objectProperty("p").assigne().call(t).endLine().newLine().endFor().endLine();break;case r.WRITE_STDOUT:i.newLine().for().let().name("i").assigne().number(0).endForDeclaration().name("i").less().number(o.argument).endForCondition().name("i").assigne().name("i").add().number(1).endForUpdate().newLine().call(n,["".concat("memory","[").concat("p","]")]).endLine().newLine().endFor().endLine();break;case r.LOOP_SET_TO_ZERO:i.newLine().name("memory").objectProperty("p").assigne().number(0).endLine();break;case r.LOOP_MOVE_PTR:i.newLine().for().endForDeclaration().name("memory").objectProperty("p").endForCondition().endForUpdate().newLine().name("p").assigne().name("p").add().number(o.argument).endLine().newLine().endFor();break;case r.LOOP_MOVE_DATA:i.newLine().if().name("memory").objectProperty("p").endIfCondition().newLine().const().name("move_to_ptr").assigne().name("p").add().number(o.argument).endLine().newLine().name("memory").objectProperty("move_to_ptr").assigne().name("memory").objectProperty("move_to_ptr").add().name("memory").objectProperty("p").endLine().newLine().name("memory").objectProperty("p").assigne().number(0).endLine().newLine().endIf();break;case r.JUMP_IF_DATA_ZERO:i.newLine().for().endForDeclaration().name("memory").objectProperty("p").endForCondition().endForUpdate();break;case r.JUMP_IF_DATA_NOT_ZERO:i.newLine().endFor();break;default:console.warn("bad char ' ".concat(v(o.kind)," ' at pc=").concat(a))}a++}return new Function(i.toString())}(u,"inF","outF")();var c=performance.now();console.log("end at ".concat(c)),console.log("done in: ".concat(c-s)),self.postMessage({type:"end"})}}))}]);